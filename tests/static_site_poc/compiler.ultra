pages = OS.getAllFiles('./pages', false)
for (pages, p)
    include p
end
#include "pages/base_site.ultra.html"
#include "pages/nav_bar.ultra.html"
#include "pages/article.ultra.html"
base_path = './pages/files'
output = './compiled'
files = OS.getAllFiles(base_path, true)
links = []
:cont.start = ''
main_contents = []
for (files, f)
    fn = f.fileName(false)
    link = (f.replace('pages/files', '').replace('.ultra', '')) + '.html'
    now = new cont()
    :now.link = link
    :now.text = fn
    include f : article
    :now.render_art = Article(article)
    links.append(now)
end
nav_bar = NavBar(links)

:page.title = 'UltraGen docs'
:page.nav_bar = nav_bar

for (links, link)
    inst = new page()
    a = :link.render_art
    :inst.main_content = a
    a = :link.link
    
    :inst.link = a    
    live BaseSite(inst)
end
